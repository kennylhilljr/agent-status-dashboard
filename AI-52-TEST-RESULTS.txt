============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
rootdir: /Users/bkh223/Documents/GitHub/agent-engineers/generations/agent-status-dashboard
configfile: pyproject.toml
plugins: asyncio-1.2.0
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 60 items

tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_delegation_tracking_with_simple_task PASSED [  1%]
tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_multiple_delegations_tracked PASSED [  3%]
tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_ticket_key_extraction_patterns PASSED [  5%]
tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_failed_delegation_recorded_as_error PASSED [  6%]
tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_delegation_cost_calculation PASSED [  8%]
tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_session_aggregates_delegation_metrics PASSED [ 10%]
tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_agent_profile_updated_from_delegation PASSED [ 11%]
tests/test_orchestrator_instrumentation.py::TestDelegationInstrumentation::test_malformed_task_input_defaults_to_unknown PASSED [ 13%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_from_usage_attribute PASSED [ 15%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_from_prompt_completion_tokens PASSED [ 16%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_from_metadata_dict PASSED [ 18%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_from_metadata_object PASSED [ 20%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_from_private_usage PASSED [ 21%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_fallback_to_defaults PASSED [ 23%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_handles_none_values PASSED [ 25%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_with_zero_values PASSED [ 26%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_handles_malformed_data PASSED [ 28%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_with_string_numbers PASSED [ 30%]
tests/test_token_extraction.py::TestTokenExtractionDirect::test_extract_tokens_priority_order PASSED [ 31%]
tests/test_token_extraction.py::TestTokenExtractionIntegration::test_delegation_with_extracted_tokens SKIPPED [ 33%]
tests/test_token_extraction.py::TestTokenExtractionIntegration::test_delegation_with_fallback_tokens SKIPPED [ 35%]
tests/test_token_extraction.py::TestTokenExtractionIntegration::test_multiple_delegations_extract_individual_tokens SKIPPED [ 36%]
tests/test_token_extraction.py::TestTokenCostCalculation::test_cost_calculation_with_extracted_tokens PASSED [ 38%]
tests/test_token_extraction.py::TestTokenCostCalculation::test_cost_calculation_different_models PASSED [ 40%]
tests/test_token_extraction.py::TestTokenExtractionEdgeCases::test_extract_tokens_with_very_large_numbers PASSED [ 41%]
tests/test_token_extraction.py::TestTokenExtractionEdgeCases::test_extract_tokens_with_mixed_metadata_sources PASSED [ 43%]
tests/test_token_extraction.py::TestTokenExtractionEdgeCases::test_orchestrator_resilient_to_token_extraction_errors SKIPPED [ 45%]
test_agent_session_metrics.py::TestSessionLifecycleBasics::test_start_session_creates_session_id PASSED [ 46%]
test_agent_session_metrics.py::TestSessionLifecycleBasics::test_start_session_tracks_session_type PASSED [ 48%]
test_agent_session_metrics.py::TestSessionLifecycleBasics::test_end_session_creates_summary PASSED [ 50%]
test_agent_session_metrics.py::TestSessionLifecycleBasics::test_end_session_increments_total_sessions PASSED [ 51%]
test_agent_session_metrics.py::TestSessionLifecycleBasics::test_end_session_with_invalid_id_raises_error PASSED [ 53%]
test_agent_session_metrics.py::TestSessionStatusTracking::test_session_status_continue PASSED [ 55%]
test_agent_session_metrics.py::TestSessionStatusTracking::test_session_status_error PASSED [ 56%]
test_agent_session_metrics.py::TestSessionStatusTracking::test_session_status_complete PASSED [ 58%]
test_agent_session_metrics.py::TestSessionNumbering::test_session_numbers_increment_sequentially PASSED [ 60%]
test_agent_session_metrics.py::TestSessionNumbering::test_session_numbers_persist_across_collector_instances PASSED [ 61%]
test_agent_session_metrics.py::TestSessionAgentTracking::test_session_tracks_agents_invoked PASSED [ 63%]
test_agent_session_metrics.py::TestSessionAgentTracking::test_session_tracks_unique_agents_only PASSED [ 65%]
test_agent_session_metrics.py::TestSessionTokenAndCostTracking::test_session_aggregates_tokens PASSED [ 66%]
test_agent_session_metrics.py::TestSessionTokenAndCostTracking::test_session_aggregates_costs PASSED [ 68%]
test_agent_session_metrics.py::TestSessionTicketTracking::test_session_tracks_tickets_worked PASSED [ 70%]
test_agent_session_metrics.py::TestSessionTicketTracking::test_session_deduplicates_ticket_keys PASSED [ 71%]
test_agent_session_metrics.py::TestContinuationFlow::test_multiple_sessions_accumulate_correctly PASSED [ 73%]
test_agent_session_metrics.py::TestContinuationFlow::test_continuation_session_loads_previous_state PASSED [ 75%]
test_agent_session_metrics.py::TestErrorHandling::test_session_handles_event_errors_gracefully PASSED [ 76%]
test_agent_session_metrics.py::TestErrorHandling::test_graceful_degradation_when_metrics_unavailable PASSED [ 78%]
test_agent_session_metrics.py::TestTimestamps::test_session_has_start_and_end_timestamps PASSED [ 80%]
test_integration_agent_session.py::TestFullSessionWorkflow::test_initializer_session_workflow PASSED [ 81%]
test_integration_agent_session.py::TestFullSessionWorkflow::test_continuation_session_workflow PASSED [ 83%]
test_integration_agent_session.py::TestMultiAgentDelegation::test_orchestrator_delegation_pattern PASSED [ 85%]
test_integration_agent_session.py::TestMultiAgentDelegation::test_parallel_agent_invocations_in_session PASSED [ 86%]
test_integration_agent_session.py::TestErrorRecoveryScenarios::test_session_with_partial_failures PASSED [ 88%]
test_integration_agent_session.py::TestErrorRecoveryScenarios::test_retry_after_error_session PASSED [ 90%]
test_integration_agent_session.py::TestPersistenceAcrossRestarts::test_state_persists_between_collector_instances PASSED [ 91%]
test_integration_agent_session.py::TestPersistenceAcrossRestarts::test_continuation_session_sees_previous_sessions PASSED [ 93%]
test_integration_agent_session.py::TestPersistenceAcrossRestarts::test_metrics_file_structure PASSED [ 95%]
test_integration_agent_session.py::TestRealisticTokenCosts::test_session_calculates_realistic_costs PASSED [ 96%]
test_integration_agent_session.py::TestRealisticTokenCosts::test_high_token_usage_session PASSED [ 98%]
test_integration_agent_session.py::TestCompleteProjectLifecycle::test_full_project_lifecycle PASSED [100%]

======================== 56 passed, 4 skipped in 0.23s =========================
